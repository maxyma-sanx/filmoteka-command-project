{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,iEAWA,MAEMC,EAAU,IAAI,EAAAC,EAAAC,SAGdC,EAAoBC,KAAKC,MAAMC,aAAaC,QAAQ,YACpDC,EAAkBJ,KAAKC,MAAMC,aAAaC,QAAQ,UAGlDE,EAAgBL,KAAKC,MAAMC,aAAaC,QATzB,YA+CUG,eAAhBC,EAAeC,EAAUC,EAAWC,GACjDF,EAASG,UAAUC,OAAO,+BAC1BH,EAAUE,UAAUE,IAAI,+BAExB,MACMC,EADcL,EAAUE,UACN,GAExBT,aAAaa,QAtDM,UAsDgBf,KAAKgB,UAAUF,IAElDG,EAAoBP,E,CAItBJ,eAAeW,EAAoBP,GACjC,IAAKA,EACH,OAGFQ,EAAAC,QAAQC,WAER,MAAMC,QAAaC,QAAQC,IACzBb,EAAQc,KAAIlB,MAAMmB,SACQ7B,EAAQ8B,kBAAkBD,EAAIE,EAAA7B,YAKtDuB,IACF3B,EAAAI,QAAK8B,cAAcC,SAAS,GAAGC,MAAMC,QAAU,QAC/CrC,EAAAI,QAAK8B,cAAcC,SAAS,GAAGC,MAAMC,QAAU,QAC/Cb,EAAAC,QAAQP,UAGV,MAAMoB,QAAqB,EAAAC,EAAAnC,SAAauB,GACxC3B,EAAAI,QAAKoC,OAAOC,UAAYH,EAEpBA,EAAaI,SAAS,6BACxB1C,EAAAI,QAAK8B,cAAcC,SAAS,GAAGC,MAAMC,QAAU,OAC/CrC,EAAAI,QAAK8B,cAAcC,SAAS,GAAGC,MAAMC,QAAU,QAGjDb,EAAAC,QAAQP,Q,CA3ELP,IACHX,EAAAI,QAAKuC,WAAW1B,UAAUE,IAAI,+BAC9BnB,EAAAI,QAAKwC,SAAS3B,UAAUC,OAAO,+BAC/BK,EAAoBlB,IAIA,iCAAlBM,IACFX,EAAAI,QAAKuC,WAAW1B,UAAUE,IAAI,+BAC9BnB,EAAAI,QAAKwC,SAAS3B,UAAUC,OAAO,+BAC/BK,EAAoBlB,IAIA,+BAAlBM,IACFX,EAAAI,QAAKuC,WAAW1B,UAAUC,OAAO,+BACjClB,EAAAI,QAAKwC,SAAS3B,UAAUE,IAAI,+BAC5BI,EAAoBb,IAItBV,EAAAI,QAAKoC,OAAOK,iBAAiB,QAASC,EAAA1C,SAGtCJ,EAAAI,QAAKuC,WAAWE,iBAAiB,SAAS,KACxChC,EAAeb,EAAAI,QAAKwC,SAAU5C,EAAAI,QAAKuC,WAAYtC,EAAkB,IAInEL,EAAAI,QAAKwC,SAASC,iBAAiB,SAAS,KACtChC,EAAeb,EAAAI,QAAKuC,WAAY3C,EAAAI,QAAKwC,SAAUlC,EAAgB,ICtDjEV,EAAAC,EAAA,a,0BAKAD,EAAAI,QAAK2C,yBAAyBF,iBAAiB,SAAS,MACtD,EAAAG,EAAAC,mBAAkBC,EAAAC,IAAI","sources":["src/js/events/libraryBtn.js","src/js/events/libraryAuth.js"],"sourcesContent":["import refs from '../refs';\n\nimport { Loading } from 'notiflix';\n\nimport MovieDB from '../API/fetchMovieAPI';\n\nimport renderMovies from '../render/renderSearchMovies';\nimport onMovieClick from './movieCard';\n\nimport lang from '../utils/checkStorageLang';\n\nconst CURRENT_PAGE = 'current';\n\nconst movieDB = new MovieDB();\n\n// Достаємо проглянуті фільми з локал стореж\nconst parsedWatchedData = JSON.parse(localStorage.getItem('watched'));\nconst parsedQueueData = JSON.parse(localStorage.getItem('queue'));\n\n// Достаємо поточну сторінку з локал стореж\nconst parsedCurrent = JSON.parse(localStorage.getItem(CURRENT_PAGE));\n\n// Якщо поточної сторінки немає в LocalStorage, то по defaultу\n// буде Watched\nif (!parsedCurrent) {\n  refs.watchedBtn.classList.add('header__library-btn--active');\n  refs.queueBtn.classList.remove('header__library-btn--active');\n  renderLibraryMovies(parsedWatchedData);\n}\n\n// Перевіряємо чи поточна зараз сторінка Watched\nif (parsedCurrent === 'header__library-btn--watched') {\n  refs.watchedBtn.classList.add('header__library-btn--active');\n  refs.queueBtn.classList.remove('header__library-btn--active');\n  renderLibraryMovies(parsedWatchedData);\n}\n\n// Перевіряємо чи поточна зараз сторінка Queue\nif (parsedCurrent === 'header__library-btn--queue') {\n  refs.watchedBtn.classList.remove('header__library-btn--active');\n  refs.queueBtn.classList.add('header__library-btn--active');\n  renderLibraryMovies(parsedQueueData);\n}\n\n// Слухач на вибране кіно\nrefs.movies.addEventListener('click', onMovieClick);\n\n// Слухач на кнопку Watched\nrefs.watchedBtn.addEventListener('click', () => {\n  addClassActive(refs.queueBtn, refs.watchedBtn, parsedWatchedData);\n});\n\n// Слухач на кнопку Queue\nrefs.queueBtn.addEventListener('click', () => {\n  addClassActive(refs.watchedBtn, refs.queueBtn, parsedQueueData);\n});\n\n// Функція при натисканні на кнопку watched або queue\nasync function addClassActive(firstBtn, secondBtn, results) {\n  firstBtn.classList.remove('header__library-btn--active');\n  secondBtn.classList.add('header__library-btn--active');\n\n  const currentPage = secondBtn.classList;\n  const res = currentPage[1];\n\n  localStorage.setItem(CURRENT_PAGE, JSON.stringify(res));\n\n  renderLibraryMovies(results);\n}\n\n// функція рендера контенту на сторінку Watched та Queue\nasync function renderLibraryMovies(results) {\n  if (!results) {\n    return;\n  }\n\n  Loading.standard();\n\n  const data = await Promise.all(\n    results.map(async id => {\n      const movieData = await movieDB.fetchMovieDetails(id, lang);\n      return movieData;\n    })\n  );\n\n  if (data) {\n    refs.myLibraryWrap.children[0].style.display = 'block';\n    refs.myLibraryWrap.children[1].style.display = 'block';\n    Loading.remove();\n  }\n\n  const renderMarkup = await renderMovies(data);\n  refs.movies.innerHTML = renderMarkup;\n\n  if (renderMarkup.includes('li class=\"movies__item\"')) {\n    refs.myLibraryWrap.children[0].style.display = 'none';\n    refs.myLibraryWrap.children[1].style.display = 'none';\n  }\n\n  Loading.remove();\n}\n","import refs from '../refs';\n\nimport { signOutFromGoogle } from '../API/firebaseAPI';\nimport { app } from '../../firebase-config';\n\nrefs.googleSignOutFromLibrary.addEventListener('click', () => {\n  signOutFromGoogle(app);\n});\n"],"names":["$krGWQ","parcelRequire","$9339e17462b9c345$var$movieDB","$c55OR","default","$9339e17462b9c345$var$parsedWatchedData","JSON","parse","localStorage","getItem","$9339e17462b9c345$var$parsedQueueData","$9339e17462b9c345$var$parsedCurrent","async","$9339e17462b9c345$var$addClassActive","firstBtn","secondBtn","results","classList","remove","add","res","setItem","stringify","$9339e17462b9c345$var$renderLibraryMovies","$eWCmQ","Loading","standard","data","Promise","all","map","id","fetchMovieDetails","$1K9LT","myLibraryWrap","children","style","display","renderMarkup","$9XGHe","movies","innerHTML","includes","watchedBtn","queueBtn","addEventListener","$iyY7Y","googleSignOutFromLibrary","$jux6J","signOutFromGoogle","$8lXmX","app"],"version":3,"file":"library.e3c08cbd.js.map"}