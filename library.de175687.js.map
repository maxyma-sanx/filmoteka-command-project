{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,2FAWMC,EAAe,UAEfC,EAAU,IAAI,EAAAC,EAAAC,SAGdC,EAAoBC,KAAKC,MAAMC,aAAaC,QAAQ,YACpDC,EAAkBJ,KAAKC,MAAMC,aAAaC,QAAQ,UAGlDE,EAAgBL,KAAKC,MAAMC,aAAaC,QAAQR,I,SAsCvCW,EAAeC,EAAUC,EAAWC,G,OAApCC,EAAcC,MAAAC,KAAAC,U,UAAdH,I,OAAAA,EAAfI,EAAArB,EAAA,CAAAqB,EAAAC,GAAAC,MAAA,SAAAC,EAA8BV,EAAUC,EAAWC,G,IAI3CS,EACAC,E,kEAJNZ,EAASa,UAAUC,OAAO,+BAC1Bb,EAAUY,UAAUE,IAAI,+BAElBJ,EAAcV,EAAUY,UACxBD,EAAMD,EAAY,GAExBhB,aAAaqB,QAAQ5B,EAAcK,KAAKwB,UAAUL,IAElDM,EAAoBhB,G,4CATOE,MAAAC,KAAAC,U,UAadY,EAAoBhB,G,OAApBiB,EAAmBf,MAAAC,KAAAC,U,UAAnBa,I,OAAAA,EAAfZ,EAAArB,EAAA,CAAAqB,EAAAC,GAAAC,MAAA,SAAAW,EAAmClB,G,IAO3BmB,EAaAC,E,qEAnBDpB,EAAO,C,uDAIZqB,EAAAC,QAAQC,W,SAEWC,QAAQC,IACzBzB,EAAQ0B,IAAG,W,MAACrB,EAAArB,EAAA,CAAAqB,EAAAC,GAAAC,MAAA,SAAAC,EAAMmB,G,IACVC,E,kFAAkBzC,EAAQ0C,kBAAkBF,EAAIG,EAAAzC,S,cAAhDuC,EAASG,EAAAC,K,kBACRJ,G,2DAFSD,G,gCAAP,K,cADPR,EAAIc,EAAAD,QAQRE,EAAA7C,QAAK8C,cAAcC,SAAS,GAAGC,MAAMC,QAAU,QAC/CJ,EAAA7C,QAAK8C,cAAcC,SAAS,GAAGC,MAAMC,QAAU,QAC/CjB,EAAAC,QAAQV,U,UAGiB,EAAA2B,EAAAlD,SAAa8B,G,OAAlCC,EAAYa,EAAAD,KAClBE,EAAA7C,QAAKmD,OAAOC,UAAYrB,EAEpBA,EAAasB,SAAS,6BACxBR,EAAA7C,QAAK8C,cAAcC,SAAS,GAAGC,MAAMC,QAAU,OAC/CJ,EAAA7C,QAAK8C,cAAcC,SAAS,GAAGC,MAAMC,QAAU,QAGjDjB,EAAAC,QAAQV,S,4CA5BKK,EAAmBf,MAAAC,KAAAC,U,CA/C7BR,IACHsC,EAAA7C,QAAKsD,WAAWhC,UAAUE,IAAI,+BAC9BqB,EAAA7C,QAAKuD,SAASjC,UAAUC,OAAO,+BAC/BI,EAAoB1B,IAIA,iCAAlBM,IACFsC,EAAA7C,QAAKsD,WAAWhC,UAAUE,IAAI,+BAC9BqB,EAAA7C,QAAKuD,SAASjC,UAAUC,OAAO,+BAC/BI,EAAoB1B,IAIA,+BAAlBM,IACFsC,EAAA7C,QAAKsD,WAAWhC,UAAUC,OAAO,+BACjCsB,EAAA7C,QAAKuD,SAASjC,UAAUE,IAAI,+BAC5BG,EAAoBrB,IAItBuC,EAAA7C,QAAKmD,OAAOK,iBAAiB,QAASC,EAAAzD,SAGtC6C,EAAA7C,QAAKsD,WAAWE,iBAAiB,SAAS,WACxChD,EAAeqC,EAAA7C,QAAKuD,SAAUV,EAAA7C,QAAKsD,WAAYrD,E,IAIjD4C,EAAA7C,QAAKuD,SAASC,iBAAiB,SAAS,WACtChD,EAAeqC,EAAA7C,QAAKsD,WAAYT,EAAA7C,QAAKuD,SAAUjD,E,ICtDjDuC,EAAAjD,EAAA,a,0BAKAiD,EAAA7C,QAAK0D,yBAAyBF,iBAAiB,SAAS,YACtD,EAAAG,EAAAC,mBAAkBC,EAAAC,I","sources":["src/js/events/libraryBtn.js","src/js/events/libraryAuth.js"],"sourcesContent":["import refs from '../refs';\n\nimport { Loading } from 'notiflix';\n\nimport MovieDB from '../API/fetchMovieAPI';\n\nimport renderMovies from '../render/renderSearchMovies';\nimport onMovieClick from './movieCard';\n\nimport lang from '../utils/checkStorageLang';\n\nconst CURRENT_PAGE = 'current';\n\nconst movieDB = new MovieDB();\n\n// Достаємо проглянуті фільми з локал стореж\nconst parsedWatchedData = JSON.parse(localStorage.getItem('watched'));\nconst parsedQueueData = JSON.parse(localStorage.getItem('queue'));\n\n// Достаємо поточну сторінку з локал стореж\nconst parsedCurrent = JSON.parse(localStorage.getItem(CURRENT_PAGE));\n\n// Якщо поточної сторінки немає в LocalStorage, то по defaultу\n// буде Watched\nif (!parsedCurrent) {\n  refs.watchedBtn.classList.add('header__library-btn--active');\n  refs.queueBtn.classList.remove('header__library-btn--active');\n  renderLibraryMovies(parsedWatchedData);\n}\n\n// Перевіряємо чи поточна зараз сторінка Watched\nif (parsedCurrent === 'header__library-btn--watched') {\n  refs.watchedBtn.classList.add('header__library-btn--active');\n  refs.queueBtn.classList.remove('header__library-btn--active');\n  renderLibraryMovies(parsedWatchedData);\n}\n\n// Перевіряємо чи поточна зараз сторінка Queue\nif (parsedCurrent === 'header__library-btn--queue') {\n  refs.watchedBtn.classList.remove('header__library-btn--active');\n  refs.queueBtn.classList.add('header__library-btn--active');\n  renderLibraryMovies(parsedQueueData);\n}\n\n// Слухач на вибране кіно\nrefs.movies.addEventListener('click', onMovieClick);\n\n// Слухач на кнопку Watched\nrefs.watchedBtn.addEventListener('click', () => {\n  addClassActive(refs.queueBtn, refs.watchedBtn, parsedWatchedData);\n});\n\n// Слухач на кнопку Queue\nrefs.queueBtn.addEventListener('click', () => {\n  addClassActive(refs.watchedBtn, refs.queueBtn, parsedQueueData);\n});\n\n// Функція при натисканні на кнопку watched або queue\nasync function addClassActive(firstBtn, secondBtn, results) {\n  firstBtn.classList.remove('header__library-btn--active');\n  secondBtn.classList.add('header__library-btn--active');\n\n  const currentPage = secondBtn.classList;\n  const res = currentPage[1];\n\n  localStorage.setItem(CURRENT_PAGE, JSON.stringify(res));\n\n  renderLibraryMovies(results);\n}\n\n// функція рендера контенту на сторінку Watched та Queue\nasync function renderLibraryMovies(results) {\n  if (!results) {\n    return;\n  }\n\n  Loading.standard();\n\n  const data = await Promise.all(\n    results.map(async id => {\n      const movieData = await movieDB.fetchMovieDetails(id, lang);\n      return movieData;\n    })\n  );\n\n  if (data) {\n    refs.myLibraryWrap.children[0].style.display = 'block';\n    refs.myLibraryWrap.children[1].style.display = 'block';\n    Loading.remove();\n  }\n\n  const renderMarkup = await renderMovies(data);\n  refs.movies.innerHTML = renderMarkup;\n\n  if (renderMarkup.includes('li class=\"movies__item\"')) {\n    refs.myLibraryWrap.children[0].style.display = 'none';\n    refs.myLibraryWrap.children[1].style.display = 'none';\n  }\n\n  Loading.remove();\n}\n","import refs from '../refs';\n\nimport { signOutFromGoogle } from '../API/firebaseAPI';\nimport { app } from '../../firebase-config';\n\nrefs.googleSignOutFromLibrary.addEventListener('click', () => {\n  signOutFromGoogle(app);\n});\n"],"names":["$bpxeT","parcelRequire","$f9aa8c6e3eb3e784$var$CURRENT_PAGE","$f9aa8c6e3eb3e784$var$movieDB","$f7J5Q","default","$f9aa8c6e3eb3e784$var$parsedWatchedData","JSON","parse","localStorage","getItem","$f9aa8c6e3eb3e784$var$parsedQueueData","$f9aa8c6e3eb3e784$var$parsedCurrent","$f9aa8c6e3eb3e784$var$addClassActive","firstBtn","secondBtn","results","$f9aa8c6e3eb3e784$var$_addClassActive","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","currentPage","res","classList","remove","add","setItem","stringify","$f9aa8c6e3eb3e784$var$renderLibraryMovies","$f9aa8c6e3eb3e784$var$_renderLibraryMovies","_callee1","data","renderMarkup","$iU1Pc","Loading","standard","Promise","all","map","id","movieData","fetchMovieDetails","$ayUZl","_ctx","sent","_ctx1","$4Nugj","myLibraryWrap","children","style","display","$xjavX","movies","innerHTML","includes","watchedBtn","queueBtn","addEventListener","$cA2C5","googleSignOutFromLibrary","$bZwXY","signOutFromGoogle","$3WUaf","app"],"version":3,"file":"library.de175687.js.map"}